@using System
@using System.Collections.Generic
@using Microsoft.AspNetCore.Blazor.Components
@using OpenRpg.Core.Requirements
@using OpenRpg.Editors.App.Helpers

<ListEditor Data="@Requirements" OnUpdate="@OnUpdate" TItem="Requirement">
    <HeaderTemplate>
        <th><abbr title="Requirement Type">Requirement Type</abbr></th>
        <th><abbr title="Associated Id">Associated Id</abbr></th>
        <th><abbr title="Associated Value">Associated Value</abbr></th>
    </HeaderTemplate>
    <RowTemplate>
        <td>
            <div class="control">
                <div class="select">
                    <select bind="@context.RequirementType">
                        @foreach (var requirementType in TypesHelper.GetRequirementTypes)
                        {
                            <option value=@requirementType.Id>@requirementType.Name</option>
                        }
                    </select>
                </div>
            </div>
        </td>
        <td>
            <div class="control">
                <input class="input" type="text" bind="@context.AssociatedId" />
            </div>
        </td>
        <td>
            <div class="control">
                <input class="input" type="text" bind="@context.AssociatedValue" />
            </div>
        </td>
    </RowTemplate>
</ListEditor>

@functions {
    [Parameter]
    IEnumerable<Requirement> Requirements { get; set; }
    
    [Parameter]
    Action<IEnumerable<Requirement>> OnUpdate { get; set; }
}
